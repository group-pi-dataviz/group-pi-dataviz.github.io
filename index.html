<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Group Pi - Conflict Data Visualization</title>
    
    <!-- Favicon and styles -->
    <link rel="icon" type="image/png" href="./logos/favicon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Roboto+Slab:wght@100..900&display=swap" rel="stylesheet">

    <!-- Tailwind Import and Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="./js/tailwind_config.js"></script>
    
    <!-- For the old version decomment the following line--> 
    
    <script type="module" src="./script.js"></script>
    
    <!--<script type="module" src="./js/main.js" defer></script>-->
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-brand-blue shadow-lg fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                
                <!-- Logo -->
                <div class="shrink-0">
                    <a href="./index.html" class="flex items-center">
                      <svg class="h-8 h-fill" viewBox="0 0 100 100" xmlns="./logos/UNIGE/RGB_video/SVG/logo_UniGe_WHITE.svg" alt="University of Genoa Logo">
                        <image href="./logos/UNIGE/RGB_video/SVG/logo_UniGe_WHITE.svg" width="100" height="100"/>
                      </svg>
                    </a>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex space-x-8">
                    <a href="#intro_id" class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors" onclick="toggleMenu()">
                        Introduction
                    </a>
                    <button 
                        data-popover-target="menu"
                        class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors"
                        type="button"
                        onclick="toggleCustomPopover(event)"
                    >
                        Sections
                    </button>
                    <ul
                        role="menu"
                        data-popover="menu"
                        hidden
                        data-popover-placement="bottom"
                        class="absolute z-50 top-full mt-1 overflow-auto rounded-lg border border-slate-200 bg-white shadow-lg focus:outline-none"
                    >
                        <li
                            role="menuitem"
                            class="cursor-pointer text-slate-800 flex w-full text-sm items-center rounded-md p-3 transition-all hover:bg-slate-100 focus:bg-slate-100 active:bg-slate-100"
                        >
                            <a href="#sec1_id" class="w-full h-full">The not so Pacific SEA</a>
                        </li>
                        <li
                            role="menuitem"
                            class="cursor-pointer text-slate-800 flex w-full text-sm items-center rounded-md p-3 transition-all hover:bg-slate-100 focus:bg-slate-100 active:bg-slate-100"
                        >
                            <a href="#sec2_id" class="w-full h-full">A country in turmoil</a>
                        </li>
                        <li
                            role="menuitem"
                            class="cursor-pointer text-slate-800 flex w-full text-sm items-center rounded-md p-3 transition-all hover:bg-slate-100 focus:bg-slate-100 active:bg-slate-100"
                        >
                            <a href="#sec3_id" class="w-full h-full">Afghanistan: the economic side of conflict</a>
                        </li>
                        <li
                            role="menuitem"
                            class="cursor-pointer text-slate-800 flex w-full text-sm items-center rounded-md p-3 transition-all hover:bg-slate-100 focus:bg-slate-100 active:bg-slate-100"
                        >
                            <a href="#sec4_id" class="w-full h-full">The Geography of a Conflict</a>
                        </li>
                    </ul>
                    <a href="#about_id" class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors" onclick="toggleMenu()">
                        About
                    </a>
                </div>

                <!-- Mobile menu button -->
                <button class="md:hidden hamburger flex flex-col space-y-1.5 p-2" onclick="toggleMenu()">
                    <span class="block w-6 h-0.5 bg-white"></span>
                    <span class="block w-6 h-0.5 bg-white"></span>
                    <span class="block w-6 h-0.5 bg-white"></span>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <div class="mobile-menu md:hidden bg-brand-blue">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="#intro_id" class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors" onclick="toggleMenu()">
                    Introduction
                </a>
                <a href="#sec1_id" class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors" onclick="toggleMenu()">
                    The not so Pacific SEA
                </a>
                <a href="#sec2_id" class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors" onclick="toggleMenu()">
                    A country in turmoil
                </a>
                <a href="#sec3_id" class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors" onclick="toggleMenu()">
                    Afghanistan: the economic side of conflict
                </a>
                <a href="#sec4_id" class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors" onclick="toggleMenu()">
                    The Geography of a Conflict
                </a>
                <a href="#about_id" class="text-white hover:bg-brand-cyan block px-3 py-2 rounded-md text-base font-medium transition-colors" onclick="toggleMenu()">
                    About
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero-gradient pt-24 pb-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto text-center fade-in-up">
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-heading font-bold text-white mb-4 leading-tight">
                Visualizing Conflict and Human Suffering through Data
            </h1>
            <h2 class="text-lg sm:text-xl lg:text-2xl font-heading text-brand-yellow mb-8">
                Group π - Data Visualization Project
            </h2>
            <div class="flex flex-wrap justify-center gap-4 text-sm text-white/90">
                <span>Alessandro Acquilino (5198425)</span>
                <span class="hidden sm:inline">•</span>
                <span>Fabrizio Sardo (5250158)</span>
                <span class="hidden sm:inline">•</span>
                <span>Stefano Passaggio (4875279)</span>
            </div>
        </div>
    </div>

    <div class="grid pt-4 lg:grid-cols-[1fr_2fr_1fr] xl:grid-cols-[2fr_3fr_2fr] gap-4 max-w-7xl mx-auto w-full flex-grow">
        <main class="col-start-2 w-full">
            <!-- Introduction Section -->
            <section id="intro_id" class="mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-16 w-full lg:w-full">
                <div class="bg-white rounded-lg shadow-md p-6 sm:p-8 card">
                    <div class="flex items-center mb-6">
                        <div class="w-1 h-8 bg-brand-red rounded mr-4"></div>
                        <h3 class="text-2xl sm:text-3xl font-heading font-bold text-brand-black">Introduction</h3>
                    </div>
                    
                    <div class="prose max-w-none">
                        <p class="text-gray-700 leading-relaxed mb-4">
                            This project aims to visualize data related to conflict and human suffering around the world.
                            The data used in this project is sourced from the <em class="text-brand-blue font-semibold">Armed Conflict Location & Event Data Project (ACLED)</em>,
                            which provides detailed information on political violence and protest events across the globe.
                            We also used data collected by the <em class="text-brand-blue font-semibold">World Food Program (WFP)</em>, in order to understand how prices of food are affected by conflict and data from the <em>World Bank's</em> data portal that provides information on Economic, Social, Environmental, Health, Education, Development and Energy indicators in Afghanistan.
                        </p>


                        <p class="text-gray-700 leading-relaxed mb-4">
                            The visualizations created in this project help to shed light on the patterns and trends of conflict, enabling a better understanding of its impact on affected populations.
                        </p>

                        <div class="bg-brand-yellow/10 border-l-4 border-brand-yellow p-4 rounded mt-6">
                            <p class="text-sm text-gray-600 mb-2">
                                <strong>Note:</strong> This project was developed as part of the <em>Data Visualization</em> course at the University of Genoa by students.
                                Therefore it is important to double-check the data and graphs presented, as they may contain errors or inaccuracies.
                            </p>
                            <a href="https://acleddata.com" target="_blank" rel="noopener noreferrer" class="text-brand-cyan hover:text-brand-blue font-medium text-sm inline-flex items-center transition-colors">
                                Visit ACLED Data Source
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                </svg>
                            </a>
                            <br />
                            <a href="https://data.humdata.org/dataset/wfp-food-prices-for-afghanistan" target="_blank" rel="noopener noreferrer" class="text-brand-cyan hover:text-brand-blue font-medium text-sm inline-flex items-center transition-colors">
                                Visit WFP Data Source
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                </svg>
                            </a>      
                            <br />  
                            <a href="https://data.humdata.org/dataset/world-bank-combined-indicators-for-afghanistan" target="_blank" rel="noopener noreferrer" class="text-brand-cyan hover:text-brand-blue font-medium text-sm inline-flex items-center transition-colors">
                                Visit World Bank Data Source
                                <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                </svg>
                            </a>                               
                </div>
                    </div>
                </div>
            </section>

            <!-- Section 1 - The not so Pacific South-East Asia-->
            <section id="sec1_id" class="mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-16 w-full lg:w-full fade-in-up">
                <div class="text-center mb-12">
                    <h3 class="text-2xl sm:text-3xl font-heading font-bold text-brand-black mb-4">The <i>not so Pacific</i> South-East Asia</h3>
                    <h5 class="font-bold font-heading">Visualizing recent conflicts in the South-East Pacific Area</h5>
                    <p class="text-gray-600 max-w-2xl mx-auto my-4 text-left">
                        Contrary to what the name suggests, the Pacific South-East Asia (SEA) region has seen his fair share of conflicts and violence in recent years.
                        This is particularly true in countries such as Afghanistan, Pakistan, Myanmar and the Philippines,
                        where ongoing conflicts and political instability have led to significant human suffering.
                        The following visualizations aim to shed light on the situation in this region by analyzing data on violent events and fatalities from 2017 to 2024.
                    </p>
                    <div class="section-divider w-24 mx-auto mb-6"></div>
                </div>

                <!-- Waffle -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">The overall situation</h5>
                        <h6 class="font-heading text-gray-600">Percentage of violent events in the region</h6>
                    </div>
                    <div id="waffle_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">
                        We consider an event to be peaceful (non-violent) if it falls in one of the following categories:
                    </p>
                    <ul class="list-disc list-inside text-gray-600 text-sm my-2">
                        <li>Peaceful protests</li>
                        <li>Protests with intervention (e.g. with police involvement but without serious injuries).</li>
                        <li>Agreements (such as ceasefires or peace treaties).</li>
                    </ul>
                    <p class="text-gray-600 text-sm">
                        All other events are considered violent.<br>Based on such definition we can notice how about <strong>58%</strong> of events in the SEA region are of violent nature.
                        <br><br>
                        This is an area of the world that is not talked much about, besides some cases such as Afghanistan.
                        This, however, is one of the most populated regions of the world with countries like Pakistan, Indonesia and Bangladesh with populations in the hundreds of millions
                        and, of course, India with it's 1.4 billion people being the most populated country in the world.
                        <br><br>
                        This part of the world, however, is very diverse so to get a more precise picture it is better to focus on individual countries
                        rather than considering it as a single identity.
                    </p>
                </div>

                <!-- Grouped Bar -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">A very diverse region</h5>
                        <h6 class="font-heading text-gray-600">Number of events and fatalities by country (top 15)</h6>
                    </div>
                    <div id="groupedBar_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">
                        The South-East Asia region is very diverse in terms of conflict dynamics, with some countries experiencing high levels of violence while others remain relatively peaceful.
                        <br><br>
                        From the grouped bar chart, we can see that countries like Afghanistan, Pakistan, Myanmar, and the Philippines have a significantly higher number of fatalities compared to other countries in the region.
                        This indicates that these countries are facing more intense and deadly conflicts.
                        <br><br>
                        It is important to note that the number of events does not always correlate directly with the number of fatalities.
                        For example, India has a high number of events but a relatively low number of fatalities compared to countries like Afghanistan and Pakistan.
                        This could be due to various factors such as the type of government, the nature of the events, the effectiveness of security measures, or differences in reporting practices.
                    </p>
                </div>

                 <!-- 100% Stacked -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">
                            Peaceful protests or a war zone?
                        </h5>
                        <h6 class="font-heading text-gray-600">
                            Event types distribution by country
                        </h6>
                    </div>
                    <div id="stackedBar_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">
                        Most common event types in SEA region are protests, but some countries show a different trend:
                        <ul class="list-disc list-inside text-gray-600 text-sm my-2 p-3">
                            <li>In <strong>Afghanistan</strong>, battles are the most common event type; in fact, until 2021,
                                there have been an open conflict in the country between the Taliban and the Afghan government,
                                supported by international forces led by the United States.
                            </li>
                            <br />
                            <li>In the <strong>Philippines</strong>, violence against civilians is the most frequent event type, indicating a high level of targeted violence.
                                In fact, between 2016 and 2022, the administration of President Rodrigo Duterte has launched a controversial anti-drug campaign,
                                which has resulted in thousands of fatalities. Adding to this, there are also ongoing protests and armed conflicts with various insurgent groups in the country.
                            </li>
                            <br />
                            <li>In <strong>Myanmar</strong>, battles are the most common event type, suggesting armed conflicts in recent years.
                                The country has been facing internal conflicts for decades, with various ethnic armed groups fighting for autonomy or independence.
                                Additionally, the military coup in February 2021 has further escalated violence and instability in the country.
                            </li>
                        </ul>
                        <p class="text-gray-600 text-sm">
                            Looking at the previous grouped bar chart, we can also notice how these three countries are the ones with the highest number of fatalities,
                            compared to the number of events.
                        </p>
                    </p>
                </div>

                <!-- Heatmap -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">
                            Dissecting violence
                        </h5>
                        <h6 class="font-heading text-gray-600">
                            Event types distribution by year in three motivating examples
                        </h6>
                    </div>


                    <div class="selector country mt-8">
                    <button class="btn country active" data-country="afghanistan">Afghanistan</button>
                    <button class="btn country" data-country="myanmar">Myanmar</button>
                    <button class="btn country" data-country="philippines">Philippines</button>
                    </div>

                    <div id="shared_heatmap_colorbar"></div>

                    <div id="heatmap-afghanistan" class="multi-container heatmap active">
                        <div id="heatmap_id"></div>
                    </div>

                    <div id="heatmap-myanmar" class="multi-container heatmap">
                        <div id="heatmap_id_2"></div>
                    </div>

                    <div id="heatmap-philippines" class="multi-container heatmap">
                        <div id="heatmap_id_3"></div>
                    </div>


                    <p class="text-gray-600 text-sm">
                        As we can see from the heatmaps, each country has its own unique pattern of violence over the years.
                        In <strong>Afghanistan</strong> battles and explosions have been the most common event types throughout the years,
                        reaching peaks of almost 10 thousands events in 2018, and declining in the years following.
                        <br><br>
                        In <strong>Myanmar</strong>, battles have also been the most frequent event type, with a significant increase in 2021 following the military coup.
                        Probably this also lead to a steep decrease in riots, which reached 0 in 2024.
                        <br><br>
                        Finally, in the <strong>Philippines</strong>, violence against civilians has been the most common event type, with a peak in 2016-2017 likely due to the anti-drug campaign launched by President Duterte.
                    </p>
                </div>

                <!-- Bar -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">The best known example</h5>
                        <h6 class="font-heading text-gray-600">Yearly fatalities in Afghanistan (2017-2024)</h6>
                    </div>
                    <div id="bar_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">The sharp decline in fatalities is evident, particularly in the last few years.
                        This can be attributed to the withdrawal of international forces and the subsequent takeover by the Taliban in August 2021,
                        which has led to a significant reduction in large scale armed conflicts.
                        While this has resulted in fewer fatalities from battles, it is not necessarily indicative of an improving situation.
                    </p>
                </div>
            </section>

            <!-- Section 2-->
             <section id="sec2_id" class="mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-16 w-full lg:w-full fade-in-up">
                <div class="text-center mb-12">
                    <h3 class="text-2xl sm:text-3xl font-heading font-bold text-brand-black mb-4">Afghanistan: a country in turmoil</h3>
                    <h5 class="font-bold font-heading">Exploring the aftermath of conflict in Afghanistan</h5>
                    <p class="text-gray-600 max-w-2xl mx-auto my-4 text-left">
                        Afghanistan has been a focal point of conflict and political instability for decades.
                        The country's recent history has been marked by the US-led invasion in 2001, the subsequent establishment of a democratic government,
                        and the eventual withdrawal of international forces in 2021, leading to the Taliban's return to power.
                    </p>
                    <div class="section-divider w-24 mx-auto mb-6"></div>
                </div>

                <!-- Histogram -->
                <div class="bg-white rounded-lg shadow-md p-6 card">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">
                            A seasonal conflict
                        </h5>
                        <h6 class="font-heading text-gray-600">
                            Monthly distribution of violent events in Afghanistan (2017-2024)
                        </h6>
                    </div>
                    
                    <div class="selector histogram-type mt-8">
                        <button class="btn histogram-type active" data-type="events">Events</button>
                        <button class="btn histogram-type" data-type="fatalities">Fatalities</button>
                    </div>

                    <div id="shared_histogram_colorbar"></div>

                    <div id="histogram-events" class="multi-container histogram active">
                        <div id="histogram_id"></div>
                    </div>

                    <div id="histogram-fatalities" class="multi-container histogram">
                        <div id="histogram_id_2"></div>
                    </div>
                        
                    <p class="text-gray-600 text-sm">
                        Like many conflict zones, Afghanistan has experienced fluctuations in violence throughout the year.
                        The histogram shows a clear seasonal pattern in the occurrence of violent events, with peaks typically observed during the warmer months.
                        This trend can be attributed to several factors, including improved weather conditions that facilitate movement and operations for various armed groups,
                        as well as the traditional fighting season in Afghanistan, which often coincides with the spring and summer months.
                    </p>
                </div>
                
                <!-- Box -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">
                            A guerilla warfare
                        </h5>
                        <h6 class="font-heading text-gray-600">
                            Monthly deaths per battle over the years year in Afghanistan
                        </h6>
                    </div>
                    <div id="boxplot_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">
                        The disorders in Afghanistan represent a typical civil warfare scenario: battles are usually fought between
                        small armed groups with relatively little deaths per battle. Hoverver battles are extremely frequent.<br><br>
                        The main outlier is August 2021, at the peak of the escalation, with over 14 deaths per battle, mainly due to
                        the disorders caused by the retreat of american forces that left the region in an unstable state.
                    </p>
                </div>


                <!-- Ridgeline -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">
                            The Toll of Conflict on Daily Life
                        </h5>
                        <h6 class="font-heading text-gray-600">
                            Distributions of essential commodity prices and daily wages in Afghanistan, 2015–2024 (USD)
                        </h6>
                    </div>
                    <div id="ridgeline_commands" class="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 p-4 max-w-xl mx-auto">
                        <button 
                            id="play-button" 
                            onclick="togglePlayRidge()" 
                            class="px-4 py-2 text-sm font-bold text-white bg-green-500 hover:bg-green-600 active:bg-green-700 rounded-lg shadow-sm transition-colors duration-300 cursor-pointer border-0 min-w-[100px] sm:min-w-0">
                            ▶ Play
                        </button>
                        <span 
                            id="year-label" 
                            class="text-lg font-bold text-gray-800 min-w-[60px] text-center order-first sm:order-none">
                        </span>
                        <input 
                            type="range" 
                            id="year-slider" 
                            class="flex-1 w-full sm:w-auto sm:max-w-[250px] h-2 rounded-lg appearance-none cursor-pointer bg-gray-200 accent-green-500 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-green-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-green-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer">
                    </div>
                    <div id="ridgeline_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">
                        The ridgeline chart illustrates the distribution of daily wages for unskilled and skilled laborers, 
                        as well as the daily prices of essential commodities, in Afghanistan from 2015 to 2024. 
                        <br><br>
                        As expected, wages vary depending on skill level, with unskilled laborers earning significantly 
                        less than those qualified for certain jobs. Overall, daily wages remain extremely low, with most of 
                        the population earning roughly 2-6 USD per day. 
                        Over the years, wages have remained relatively stable, with minor fluctuations and a slight decrease 
                        after 2021 following political and economic disruptions.
                        <br><br>
                        Commodity prices for staples such as rice, wheat, and sugar have generally remained stable 
                        during this period, although affordability is still constrained by the very low wages. 
                        Prices of cooking oil have increased somewhat more noticeably, which may pose challenges 
                        for households, but these goods remain within reach for many urban households.                    
                    </p>
                </div>
            </section>

            <!-- Section 3-->
             <section id="sec3_id" class="mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-16 w-full lg:w-full fade-in-up">
                <div class="text-center mb-12">
                    <h3 class="text-2xl sm:text-3xl font-heading font-bold text-brand-black mb-4">
                        Afghanistan: the economic side of conflict
                    </h3>
                    <h5 class="font-bold font-heading">
                        Analyzing government expenditure patterns in Afghanistan
                    </h5>
                    <p class="text-gray-600 max-w-2xl mx-auto my-4 text-left">
                        Government expenditure is a crucial aspect of a country's economic and social development,
                        particularly in conflict-affected regions like Afghanistan. Understanding how government funds are allocated
                        can provide insights into the priorities and challenges faced by the country.
                        The following visualization explores the patterns of government expenditure in Afghanistan over the years,
                        highlighting key areas of spending and their implications for the country's development.
                    </p>
                    <div class="section-divider w-24 mx-auto mb-6"></div>
                </div>

                <!-- Line Chart -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">
                            The Economy of War
                        </h5>
                        <h6 class="font-heading text-gray-600">
                            Government expenditure (% of total government expenditure) per category per year in Afghanistan (2004-2021)
                        </h6>
                    </div>
                    <div id="linechart_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">
                        A significant portion of government spending has been allocated to the military and defense sector, reflecting the ongoing security challenges faced by the country.
                        This trend is particularly pronounced during periods of heightened conflict, such as the years following the US-led invasion in 2001 and the subsequent insurgency.
                        <br><br>
                        The data also reveals fluctuations in expenditure patterns over the years, influenced by changes in government priorities, international aid, and the evolving security situation.
                        Overall, the chart highlights the complex interplay between conflict and economic management in Afghanistan, underscoring the challenges of balancing security needs with social and economic development goals.
                    </p>
                </div>
            </section>
            
            <!-- Section 4 -->
             <section id="sec4_id" class="mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-16 w-full lg:w-full fade-in-up">
                <div class="text-center mb-12">
                    <h3 class="text-2xl sm:text-3xl font-heading font-bold text-brand-black mb-4">
                        The Geography of a Conflict
                    </h3>
                    <h5 class="font-bold font-heading">
                        Mapping violent events in Afghanistan
                    </h5>
                    <p class="text-gray-600 max-w-2xl mx-auto my-4 text-left">
                        Geographical analysis of conflict events can provide valuable insights into the spatial distribution and intensity of violence within a country.
                        In Afghanistan, understanding where violent events occur can help identify hotspots of conflict, assess the impact on local communities,
                        and inform strategies for peacebuilding and development.
                        The following visualization maps the locations of violent events in Afghanistan, highlighting patterns and trends over time.
                    </p>
                    <div class="section-divider w-24 mx-auto mb-6"></div>
                </div>

                <!-- Symbol Map -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">
                            Afghanistan battle history
                        </h5>
                        <h6 class="font-heading text-gray-600">
                            subtitle
                        </h6>
                    </div>
                    <div id="symbolCommands" class="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 p-4 max-w-xl mx-auto">
                        <button 
                            id="btnSymbolPlay" 
                            onclick="symbolPlay()" 
                            class="px-4 py-2 text-sm font-bold text-white bg-green-500 hover:bg-green-600 active:bg-green-700 rounded-lg shadow-sm transition-colors duration-300 cursor-pointer border-0 min-w-[100px] sm:min-w-0">
                            ▶ Play
                        </button>
                        <span 
                            id="lblSymbolTime" 
                            class="text-lg font-bold text-gray-800 min-w-[60px] text-center order-first sm:order-none">
                        </span>
                        <input 
                            type="range" 
                            id="sliderSymbolTime" 
                            class="flex-1 w-full sm:w-auto sm:max-w-[250px] h-2 rounded-lg appearance-none cursor-pointer bg-gray-200 accent-green-500 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-green-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-green-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer">
                    </div>
                    <div id="symbolMap_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">
                        comments
                    </p>
                </div>

                <!-- Choropleth Map small multiples -->
                <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
                    <div class="text-center">
                        <h5 class="font-heading font-bold text-2xl">
                            Afghanistan Event Types by Region
                        </h5>
                        <h6 class="font-heading text-gray-600">
                            subtitle
                        </h6>
                    </div>

                    <select class="border border-gray-300 rounded px-3 py-2 mt-4" id="event-type-select">
                        <option value="Battles">Battles</option>
                        <option value="Explosions/Remote violence">Explosions/Remote violence</option>
                        <option value="Violence against civilians">Violence against civilians</option>
                        <option value="Protests">Protests</option>
                        <option value="Riots">Riots</option>
                        <option value="Strategic developments">Strategic developments</option>
                    </select>

                    <div id="shared_choroplethMap_colorbar" class="mt-4"></div>


                    <div id="choroplethMap_id" class="text-center w-full h-full p-4">
                        
                    </div>
                    <p class="text-gray-600 text-sm">
                        comments
                    </p>
                </div>

<section id="sec4_id" class="mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-16 w-full lg:w-full fade-in-up">
    <!-- Flow Map -->
    <div class="bg-white rounded-lg shadow-md p-6 card center my-4">
        <div class="text-center mb-4">
            <h5 class="font-heading font-bold text-2xl">
                Afghanistan Migration Flows
            </h5>
            <h6 class="font-heading text-gray-600">
                Refugee and asylum seeker movements over time
            </h6>
        </div>

        <!-- Controls: Play button, Year label, and Slider -->
        <div id="flowmap_commands" class="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 p-4 max-w-xl mx-auto">
            <button 
                id="flowmap_play-button" 
                onclick="togglePlay()" 
                class="px-4 py-2 text-sm font-bold text-white bg-green-500 hover:bg-green-600 active:bg-green-700 rounded-lg shadow-sm transition-colors duration-300 cursor-pointer border-0 min-w-[100px] sm:min-w-0">
                ▶ Play
            </button>
            <span 
                id="flowmap_year-label" 
                class="text-lg font-bold text-gray-800 min-w-[60px] text-center order-first sm:order-none">
            </span>
            <input 
                type="range" 
                id="flowmap_year-slider" 
                class="flex-1 w-full sm:w-auto sm:max-w-[250px] h-2 rounded-lg appearance-none cursor-pointer bg-gray-200 accent-green-500 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-green-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-green-500 [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer">
        </div>

        <!-- Legend -->
        <div class="flex justify-center items-center gap-6 mb-4 text-sm flex-wrap">
            <div class="flex items-center gap-2">
                <div class="w-8 h-0.5" style="background-color: #cf4119;"></div>
                <span>Outward flows (from Afghanistan)</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-8 h-0.5" style="background-color: #1f77b4;"></div>
                <span>Inward flows (to Afghanistan)</span>
            </div>
            <div class="flex items-center gap-2">
                <div class="w-3 h-3 rounded-full" style="background-color: #ffd700; border: 1px solid #ff8c00;"></div>
                <span>Afghanistan</span>
            </div>
        </div>

        <!-- Map Container -->
        <div id="flowMap_id" class="text-center w-full h-full p-4"></div>

        <!-- Statistics -->
        <div id="flow-stats" class="text-center text-sm text-gray-600 mt-4">
            <span id="outward-stat" class="mr-4"></span>
            <span id="inward-stat"></span>
        </div>

        <p class="text-gray-600 text-sm mt-4">
            Line thickness represents migration volume. Hover over countries or flows for detailed information.
            Data shows cumulative refugee and asylum seeker populations by destination country.
        </p>
    </div>
</section>

            </section>
        </main>

        <!-- Aside for navigation-->
        <aside class="hidden lg:block pr-16">
            <div class="shadow-md rounded p-8 mx-auto sticky w-full top-36 my-16 grid grid-cols-[10px_1fr] gap-2">
                <div id="progressBar_id" class="hero-gradient w-full col-start-1 rounded">
                </div>
                <nav class="col-start-2">
                    <ol>
                        <li id="intro_id_nav"><a href="#intro_id">Introduction</a></li>
                        <li id="sec1_id_nav"><a href="#sec1_id">The not so Pacific SEA</a></li>
                        <li id="sec2_id_nav"><a href="#sec2_id">A country in turmoil</a></li>
                        <li id="sec3_id_nav"><a href="#sec3_id">Afghanistan: the economic side of conflict</a></li>
                        <li id="sec4_id_nav"><a href="#sec4_id">The Geography of a Conflict</a></li>
                    </ol>
                </nav>
            </div>
        </aside>
    </div>

    <!-- About Section -->
    <section id="about_id" class="bg-brand-blue py-6 sm:py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h3 class="text-2xl sm:text-3xl font-heading font-bold text-white mb-4">About This Project</h3>
                <p class="text-white/90 max-w-2xl mx-auto mb-8">
                    Developed as part of the Data Visualization course at the University of Genoa, 
                    this project demonstrates the power of visual analytics in understanding complex global issues.
                </p>
                <div class="flex flex-wrap justify-center gap-4 text-sm text-white/80">
                  <a href="https://dibris.unige.it/" class="bg-dibris p-4 rounded-full">DIBRIS Department</a>
                  <a href="https://unige.it/" class="bg-brand-cyan p-4 rounded-full">University of Genoa</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-brand-black text-white py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-sm">© 2025 Group π - Data Visualization Course, University of Genoa</p>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button id="scrollTop" class="fixed bottom-8 right-8 bg-brand-cyan text-white p-3 rounded-full shadow-lg opacity-0 pointer-events-none transition-opacity hover:bg-brand-blue" onclick="scrollToTop()">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
        </svg>
    </button>

    <script>
        // Toggle popover menu (renamed to avoid conflict with native HTMLElement.togglePopover)
        function toggleCustomPopover(event) {
            const button = event.currentTarget;
            const popoverId = button.getAttribute('data-popover-target');
            const popover = document.querySelector(`[data-popover="${popoverId}"]`);
            if (!popover) return;
            const isHidden = popover.hasAttribute('hidden');

            console.log(popoverId, popover, isHidden);

            if (isHidden) {
                popover.removeAttribute('hidden');
            } else {
                popover.setAttribute('hidden', '');
            }
        }

        // If click outside popover, close it
        document.addEventListener('click', function(event) {
            const popovers = document.querySelectorAll('[data-popover]');
            popovers.forEach(popover => {
                const popoverId = popover.getAttribute('data-popover');
                const button = document.querySelector(`[data-popover-target="${popoverId}"]`);
                if (button && !button.contains(event.target) && !popover.contains(event.target)) {
                    popover.setAttribute('hidden', '');
                }
            });
        });

        // Mobile menu toggle
        function toggleMenu() {
            const menu = document.querySelector('.mobile-menu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.toggle('open');
            hamburger.classList.toggle('active');
        }

        // Scroll to top button
        const scrollTopBtn = document.getElementById('scrollTop');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollTopBtn.style.opacity = '1';
                scrollTopBtn.style.pointerEvents = 'auto';
            } else {
                scrollTopBtn.style.opacity = '0';
                scrollTopBtn.style.pointerEvents = 'none';
            }
        });

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const offset = 80; // Account for fixed navbar
                    const targetPosition = target.offsetTop - offset;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Add animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in-up');
                }
            });
        }, observerOptions);

        document.querySelectorAll('section').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>